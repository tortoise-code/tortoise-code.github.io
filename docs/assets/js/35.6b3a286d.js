(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{351:function(s,a,t){"use strict";t.r(a);var e=t(25),r=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"docker安装mysql"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker安装mysql"}},[s._v("#")]),s._v(" Docker安装mysql")]),s._v(" "),a("h2",{attrs:{id:"下载mysql"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#下载mysql"}},[s._v("#")]),s._v(" 下载mysql")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" pull mysql \n")])])]),a("blockquote",[a("p",[s._v("下载过慢请看docker"),a("RouterLink",{attrs:{to:"/linux/docker/"}},[s._v("配置镜像源")])],1)]),s._v(" "),a("h2",{attrs:{id:"启动mysql"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#启动mysql"}},[s._v("#")]),s._v(" 启动mysql")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-itd")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" java-mysql "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3307")]),s._v(":3306 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-e")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("MYSQL_ROOT_PASSWORD")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("123456")]),s._v(" mysql\n")])])]),a("p",[a("code",[s._v("--name java-myqsql")]),s._v(" 给mysql容器起个名字方便后期启动删除")]),s._v(" "),a("p",[a("code",[s._v("-itd")]),s._v(" 后台运行mysql")]),s._v(" "),a("p",[a("code",[s._v("-p 3307:3306")]),s._v(" "),a("code",[s._v("宿主")]),s._v("中安装的有"),a("code",[s._v("mysql")]),s._v(",和容器"),a("code",[s._v("mysql")]),s._v("端口冲突\n将宿主系统"),a("code",[s._v("3307")]),s._v("端口映射到容器"),a("code",[s._v("mysql")]),s._v("的"),a("code",[s._v("3306")]),s._v("端口上")]),s._v(" "),a("p",[s._v("可以使用 "),a("code",[s._v("docker ps")]),s._v("查看启动的容器信息")]),s._v(" "),a("blockquote",[a("p",[a("code",[s._v("宿主")]),s._v(" 安装docker容器的操作系统")])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 示例")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v("\n")])])]),a("pre",{staticStyle:{backgroud:"rgba(0,0,0,0.5)",color:"green"}},[s._v('CONTAINER ID   IMAGE     COMMAND                   CREATED          STATUS         PORTS                                                  NAMES\n8f47fb9ab500   mysql     "docker-entrypoint.s…"   52 minutes ago   Up 3 seconds   33060/tcp, 0.0.0.0:3307->3306/tcp, :::3307->3306/tcp   java-mysql\n')]),s._v(" "),a("h2",{attrs:{id:"安装好后无法链接问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装好后无法链接问题"}},[s._v("#")]),s._v(" 安装好后无法链接问题")]),s._v(" "),a("ol",[a("li",[a("code",[s._v("宿主")]),s._v("安装过"),a("code",[s._v("mysql")]),s._v("的情况可以在外部直接使用"),a("code",[s._v("mysql")]),s._v("链接容器数据库")])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("mysql "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-P3307")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-uroot")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p123456")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 链接失败")]),s._v("\n")])])]),a("p",[s._v("错误信息")]),s._v(" "),a("pre",{staticStyle:{backgroud:"rgba(0,0,0,0.5)",color:"green"}},[s._v("mysql: [Warning] Using a password on the command line interface can be insecure.\nERROR 1045 (28000): Access denied for user 'root'@'localhost' (using password: YES)")]),s._v(" "),a("blockquote",[a("p",[s._v("错误信息提示密码错误")])]),s._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[s._v("进入到容器内部")])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# java-mysql容器名 可以用容器ID号代替")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-it")]),s._v(" java-mysql /bin/bash\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 此时mysql是容器mysql 容器mysql默认端口是3306 需要更改")]),s._v("\nmysql "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-P3306")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-uroot")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p123456")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 容器内部链接无问题 可以正常使用")]),s._v("\n")])])]),a("pre",{staticStyle:{backgroud:"rgba(0,0,0,0.5)",color:"green"}},[s._v("mysql: [Warning] Using a password on the command line interface can be insecure.\nWelcome to the MySQL monitor.  Commands end with ; or \\g.\nYour MySQL connection id is 8\nServer version: 8.0.32 MySQL Community Server - GPL\n\nCopyright (c) 2000, 2023, Oracle and/or its affiliates.\n\nOracle is a registered trademark of Oracle Corporation and/or its\naffiliates. Other names may be trademarks of their respective\nowners.\n\nType 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.\n\nmysql> \n")]),s._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[a("p",[s._v("错误原因分析")]),s._v(" "),a("p",[a("code",[s._v("a)")]),s._v(" 端口映射出问题了(docker其他端口正常,排除)"),a("br"),s._v(" "),a("code",[s._v("b)")]),s._v(" 密码错误(排除)"),a("br"),s._v(" "),a("code",[s._v("c)")]),s._v(" 权限问题(大概率)"),a("br"),s._v(" "),a("code",[s._v("d)")]),s._v(" 连接方式有问题(最终确认)"),a("br")])]),s._v(" "),a("li",[a("p",[s._v("修改root登录权限\n在容器内部登录"),a("code",[s._v("mysql")])])])]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 查看所有数据库 --")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("show")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("databases")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 使用mysql数据 --")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("use")]),s._v(" mysql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 查看user表 user和host字段信息 -- ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("host "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),a("pre",{staticStyle:{backgroud:"rgba(0,0,0,0.5)",color:"green"}},[s._v("+------------------+-----------+\n| user             | host      |\n+------------------+-----------+\n| root             | %         |\n| mysql.infoschema | localhost |\n| mysql.session    | localhost |\n| mysql.sys        | localhost |\n| root             | localhost |\n+------------------+-----------+\n5 rows in set (0.00 sec)")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 修改root角色访问权限 -- ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("update")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" host"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'%'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v(" host"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'localhost'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 刷新权限信息 -- ")]),s._v("\nFLUSH "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIVILEGES")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),a("p",[s._v("报错 提示root有远程访问权限")]),s._v(" "),a("pre",{staticStyle:{backgroud:"rgba(0,0,0,0.5)",color:"green"}},[s._v("ERROR 1062 (23000): Duplicate entry '%-root' for key 'user.PRIMARY'")]),s._v(" "),a("p",[s._v("解决")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在宿主机使用远程连接命令")]),s._v("\nmysql "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-h127.0.0.1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-P3306")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-uroot")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p123456")]),s._v("\n")])])]),a("blockquote",[a("p",[s._v("mysql 默认访问域名localhost linux没有解析为127.0.0.1 所以无法访问")])]),s._v(" "),a("h2",{attrs:{id:"下载使用navicat"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#下载使用navicat"}},[s._v("#")]),s._v(" 下载使用navicat")]),s._v(" "),a("p",[s._v("ubuntu中下载"),a("a",{attrs:{href:"https://download.navicat.com.cn/download/navicat16-mysql-cs.AppImage",target:"_blank",rel:"noopener noreferrer"}},[s._v("Navicat MySQL"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("访问: "),a("code",[s._v("https://www.navicat.com.cn")]),s._v(" 去下载")]),s._v(" "),a("p",[s._v("默认下载位置用户目录下:"),a("code",[s._v("下载")]),s._v("或"),a("code",[s._v("Download")])]),s._v(" "),a("blockquote",[a("p",[s._v("如果是汉字目录 可以通过复制"),a("code",[s._v("下载")]),s._v("后用cd进入")])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 对下载的软件提升权限")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" +x navicat16-mysql-cs.AppImage\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动软件")]),s._v("\n./navicat16-mysql-cs.AppImage\n")])])]),a("p",[s._v("配置链接信息")]),s._v(" "),a("p",[a("img",{attrs:{src:"http://media.codecore.cn/markdown/navicat.PNG",alt:"/navicat.PNG"}})]),s._v(" "),a("h2",{attrs:{id:"添加远程登录用户"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#添加远程登录用户"}},[s._v("#")]),s._v(" 添加远程登录用户")]),s._v(" "),a("p",[s._v("进入mysql数据库")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 使用mysql数据库 -- ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("use")]),s._v(" mysql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 查看当前用户 --")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("host "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 添加一个ysy用户 密码为123456 --")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("create")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ysy'")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@'%'")]),s._v(" IDENTIFIED "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WITH")]),s._v(" mysql_native_password "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'123456'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 给ysy用添加所有权限 --")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("grant")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("all")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("to")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ysy'")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@'%'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])])])}),[],!1,null,null,null);a.default=r.exports}}]);